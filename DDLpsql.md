CREATE TABLE Person(id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name varchar(50) NOT NULL UNIQUE,
    email varchar(50) not null unique);
    
CREATE TABLE Company (id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name varchar(50) NOT NULL);
    
CREATE TABLE Person_Company (person_id int REFERENCES person(id), 
company_id int REFERENCES company(id));

CREATE TABLE Evention(uid uuid DEFAULT gen_random_uuid () PRIMARY key not null unique, company_id int REFERENCES company(id) NOT NULL,
    name varchar(50) NOT NULL, start_time timestamp, end_time timestamp, balance bigint);

CREATE TABLE Operation(uid uuid DEFAULT gen_random_uuid () PRIMARY key not null unique, evention_uid uuid REFERENCES evention(uid),
    name varchar(50) NOT NULL, value bigint, time timestamp, note varchar);
   
CREATE TABLE Payed_for(operation_uid uuid REFERENCES operation(uid), 
value int, person_id int REFERENCES person(id));